<section class="create-vagas">
    <div class="wrapper">
        <div class="header">
            <h1 class="title">Cadastro de vagas</h1>
        </div>
        
        <div class="content">
            <mat-horizontal-stepper class="container">
                <mat-step>
                    <div>
                        <ng-template matStepLabel>Profissão</ng-template>
                        <form [formGroup]="description">
                            <div class="create-vaga__bloco">
                                <div class="create-vaga__bloco-info">
                                    <h2 class="create-vaga__bloco-info-title">
                                        Profissão
                                    </h2>

                                    <p class="create-vaga__bloco-info-desc">
                                        Selecione a categoria e a profissão a qual sua vaga pertence.
                                    </p>
                                </div>

                                <div class="create-vaga__container-select">
                                    <div class="create-vaga__select">
                                        <div class="create-vaga__select-text" (click)="openCategorias()">
                                            Categoria
                                        </div>
                                        <div class="create-vaga__select-options options-categorias">
                                            <div *ngFor="let categoria of categorias" class="create-vaga__select-options-item" (click)="setCategoria(categoria.codCategoria)">
                                                <img src="../../../assets/images/icones/profissao/{{categoria.imagemCategoria}}">
                                                <p> {{categoria.nomeCategoria}} </p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="create-vaga__select">
                                        <div *ngIf="! hasCategoriaSelecionada()" class="create-vaga__select-text" style="font-size: 14px">
                                            Selecione uma categoria
                                        </div>
                                        <div *ngIf="hasCategoriaSelecionada()" class="create-vaga__select-text" (click)="openProfissoes()">
                                            Profissão
                                        </div>
                                        <div class="create-vaga__select-options options-profissao">
                                            <div *ngFor="let profissao of profissoes" class="create-vaga__select-options-item" (click)="vagaModel.setProfissao(profissao.codProfissao)">
                                                <p> {{profissao.nomeProfissao}} </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="create-vaga__bloco">
                                <div class="create-vaga__bloco-info">
                                    <h2 class="create-vaga__bloco-info-title">
                                        Regime de Contratação
                                    </h2>

                                    <p class="create-vaga__bloco-info-desc">
                                        Selecione qual regime de contratação.
                                    </p>
                                </div>

                                <div class="create-vaga__container-select">
                                    <div class="create-vaga__select">
                                        <div class="create-vaga__select-text" (click)="openRegimes()">
                                            Regime de Contratação
                                        </div>
                                        <div class="create-vaga__select-options options-regime">
                                            <div *ngFor="let regime of regimes" class="create-vaga__select-options-item" (click)="vagaModel.setRegimeContratacao(regime.codRegimeContratacao)">
                                                <p> {{regime.nomeRegimeContratacao}} </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="create-vaga__bloco">
                                <div class="create-vaga__bloco-info">
                                    <h2 class="create-vaga__bloco-info-title">
                                        Benefícios
                                    </h2>

                                    <p class="create-vaga__bloco-info-desc">
                                        Adicione quais benefícios sua vaga irá possuir.
                                        <br> Você pode adicionar quantos quiser!
                                    </p>
                                </div>

                                <div class="create-vaga__add-input">
                                    <input type="text" class="create-vaga__add-input-input js-input-beneficio" (keyup)="setBeneficio($event)">
                                    <button class="create-vaga__add-input-button" (click)="adicionaBeneficio()"> + </button>
                                </div>

                                <div class="create-vaga__beneficios-list">
                                    <div *ngFor="let beneficio of beneficios" class="create-vaga__beneficios-list-item">
                                        {{beneficio.nomeBeneficio}}

                                        <button class="create-vaga__beneficios-list-item-remove" (click)="removeBeneficio(beneficio.nomeBeneficio)"></button>
                                    </div>
                                </div>
                            </div>
                        </form>
                        
                        <button mat-button matStepperNext>Próximo</button>
                    </div>
                </mat-step>
                
                <mat-step>
                    <ng-template matStepLabel>Descrição</ng-template>
                    <form class='form'[formGroup]="description">
                        <app-description-box></app-description-box>
                        <mat-form-field class="form__input" appearance="outline">
                            <mat-label>Salario</mat-label>
                            <input matInput formControlName="salarioVaga" type="number" class="right-align" required>
                        </mat-form-field>
                        <mat-form-field class="form__input" appearance="outline">
                            <mat-label>Carga Horaria</mat-label>
                            <input matInput formControlName="cargaHorariaVaga" placeholder="Ex. 8h" required>
                        </mat-form-field>
                        <mat-form-field class="form__input" appearance="outline">
                            <mat-label>Quantidade de vagas disponível</mat-label>
                            <input matInput formControlName="quantidadeVaga" required>
                        </mat-form-field>
                        
                        <section *ngFor="let benefit of benefits; let i = index;" class="beneficio">
                            <mat-form-field class="form__input" appearance="outline">
                                <mat-label>Nome do beneficio</mat-label>
                                <input matInput required name="nomeBeneficio{{i}}" [(ngModel)]="benefit.nomeBeneficio">
                            </mat-form-field>
                            <button type="button" mat-mini-fab color="warn" (click)="removeBenefit(i)" class="btn-delete">
                                <mat-icon>delete</mat-icon>
                            </button>
                        </section>
                        <button type="button" mat-fab color="primary" (click)="addBenefit()">
                            <mat-icon>add</mat-icon>
                        </button>
                    </form>
                    <div>
                        <button mat-button matStepperPrevious class="btn-prev">Voltar</button>
                        <button mat-button matStepperNext>Próximo</button>
                    </div>
                </mat-step>
                
                <mat-step>
                    <ng-template matStepLabel>Requisitos</ng-template>
                    <form>
                        <div class="requisitos__description">Ter, no mínimo...</div>
                        <mat-form-field class="quarter-width" appearance="outline">
                            <mat-label>
                                <div class="requisito__name">
                                    <div class="requisito__img">
                                        <img src="../../../assets/images/icones/requisitos/escolaridade.png" class="requisito__img-icon">
                                    </div>
                                    Escolaridade
                                </div>
                            </mat-label>
                            <mat-select required [(ngModel)]="selectedEsclr" name="escolaridade">
                                <mat-option *ngFor="let escolaridade of escolaridadeList" [value]="escolaridade">
                                    {{ escolaridade.nomeAdicional }}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field class="quarter-width" appearance="outline">
                            <mat-label>
                                <div class="requisito__name">
                                    <div class="requisito__img">
                                        <img src="../../../assets/images/icones/requisitos/alfabetizacao.png" class="requisito__img-icon">
                                    </div>
                                    Alfabetização
                                </div>
                            </mat-label>
                            <mat-select required [(ngModel)]="selectedAlf" name="alfabetizacao">
                                <mat-option *ngFor="let alfabetizacao of alfabetizacaoList" [value]="alfabetizacao">
                                    {{ alfabetizacao.nomeAdicional }}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                        
                        <div class="requisitos__description requisitos__description--habilidade">Ser bom em...</div>
                        <div class="habilidades">
                            <div class="habilidade" *ngFor="let habilidade of habilidadeList">
                                <input type="checkbox" class="d-none input-requisito" id="{{ habilidade.codAdicional }}" name="{{ habilidade.nomeAdicional }}" [value]="habilidade.codAdicional"  [(ngModel)]="habilidade.checked">
                                <label for="{{ habilidade.codAdicional }}" class="habilidade__icon">
                                    <img src="../../../assets/images/icones/habilidades/{{ habilidade.imagemAdicional }}">
                                    {{ habilidade.nomeAdicional }}
                                </label>
                                <mat-checkbox class="requisito__obrigatorio" id="{{ habilidade.codAdicional }}" name="{{ habilidade.codAdicional }}" [(ngModel)]="habilidade.obridatorio" [disabled]="habilidade.checked === false">Obrigatório</mat-checkbox>
                            </div>
                        </div>
                    </form>
                    <div>
                        <button mat-button matStepperPrevious class="btn-prev">Voltar</button>
                        <button mat-button matStepperNext>Próximo</button>
                    </div>
                </mat-step>
                
                <mat-step>
                    <ng-template matStepLabel>Localização</ng-template>
                    <form class='form'class="form" [formGroup]="address">
                        <div class="address__checkbox">
                            <mat-checkbox>Utilizar endereço padrão da empresa</mat-checkbox>
                        </div>
                        <mat-form-field class="form__input" appearance="outline">
                            <mat-label>CEP</mat-label>
                            <input matInput placeholder="Ex. 00000-000" formControlName="cepEndereco" (focusout)="searchLocation(cep.value)" #cep required>
                        </mat-form-field>
                        <mat-form-field class="form__input" appearance="outline">
                            <mat-label>Logradouro</mat-label>
                            <input matInput formControlName="logradouroEndereco" required>
                        </mat-form-field>
                        <mat-form-field class="form__input" appearance="outline">
                            <mat-label>Cidade</mat-label>
                            <input matInput formControlName="cidadeEndereco" required>
                        </mat-form-field>
                        <mat-form-field class="form__input" appearance="outline">
                            <mat-label>Estado</mat-label>
                            <input matInput placeholder="Ex. SP" formControlName="estadoEndereco" required>
                        </mat-form-field>
                        <mat-form-field class="form__input" appearance="outline">
                            <mat-label>Número</mat-label>
                            <input matInput formControlName="numeroEndereco" required>
                        </mat-form-field>
                        <mat-form-field class="form__input" appearance="outline">
                            <mat-label>Complemento</mat-label>
                            <input matInput formControlName="complementoEndereco">
                        </mat-form-field>
                    </form>
                    <div>
                        <button mat-button matStepperPrevious class="btn-prev">Voltar</button>
                        <button mat-button (click)="submit()">Cadastrar</button>
                    </div>
                </mat-step>
            </mat-horizontal-stepper>
        </div>
    </div>
</section>
