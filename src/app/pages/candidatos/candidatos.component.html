<section class="page candidatos">
    <div class="wrapper">

        <div class="header">
            <div class="content-title">
                <h1 class="title">Candidatos</h1>
                <p class="description">
                    Veja todos os usuários que se candidataram para as suas vagas.
                </p>
            </div>


            <div class="buttons">
                <input class="search__input search__input--candidatos" type="text" id="search" placeholder="Pesquisar">
                <div (click)='btnSearch()' class="buttons--item" aria-label="Botão de busca">
                    <mat-icon class="buttons--item-icon">search</mat-icon>
                </div>
                <div (click)='btnFilter()' class="buttons--item" aria-label="Botão de filtro">
                    <mat-icon class="buttons--item-icon">filter_alt</mat-icon>
                </div>
            </div>
        </div>

        <div class="content">
            <div id="filter" class="filtros is-active">
                <div *ngFor="let filtro of filtros" class="filtros__item">
                    <input type="checkbox" (change)="getCandidatosPorVaga()" value="{{filtro.value}}" id="candidatos-filtro-{{filtro.className}}" [checked]="filtro.checked">
                    <label class="filtros__item-name" for="candidatos-filtro-{{filtro.className}}"> {{filtro.label}} </label>
                </div>
            </div>
            
            <div class="candidato__listagem">
                <div class="loading-spinner" *ngIf="! isCandidatosCarregados"></div>
                <ng-container *ngIf="isCandidatosCarregados">
                    <ng-container *ngIf="candidaturas.length === 0">
                        <app-empty></app-empty>
                    </ng-container>
                    <ng-container *ngIf="candidaturas.length > 0">
                        <ng-template ngFor let-candidatura [ngForOf]="candidaturas" >
                            <div class="candidato__listagem-profissao">
                                <div class="candidato__header">
                                    <img src="../../../assets/images/icones/profissao/{{candidatura.imagemCategoria}}" alt="{{candidatura.nomeProfissao}}" class="candidato__header--icon">
            
                                    <h1 class="candidato__header--title"> {{candidatura.nomeProfissao}} </h1>
                                </div>
            
                                <p class="candidato__header--description"> {{candidatura.descricaoVaga}} </p>
            
                                <ng-container *ngFor="let candidato of candidatura.candidatos" >
                                    <div class="list">
                                        <div (click)="openModal(candidato.codCandidato, candidatura.codVaga, candidato.codCandidatura)" class="list__item status-{{candidato.codStatusCandidatura}}">
                                            <div class="list__item-img">
                                                <img src="https://miro.medium.com/max/720/1*W35QUSvGpcLuxPo3SRTH4w.png" alt="{{candidato.nomeCandidato}}" class="list__item-img-icon">
                                            </div>
            
                                            <div class="list__item-name"> {{candidato.nomeCandidato}} </div>
                                        </div>
                                    </div>
                                </ng-container>
                            </div>
                        </ng-template>
                    </ng-container>
                </ng-container>
            </div>            

        </div>
    </div>
</section>
